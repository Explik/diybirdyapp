spec:
  name: diy-birdy-app

  static_sites:
  - name: frontend
    source_dir: web
    github:
      branch: master
      deploy_on_push: true
      repo: Explik/diybirdyapp
    
    build_command: npm install && npm run build
    output_dir: dist/diy-birdy-app/browser
    
    index_document: index.html
    error_document: index.html
    
  services:
  - dockerfile_path: api/Dockerfile
    git:
      branch: main
      repo_clone_url: https://github.com/Explik/diybirdyapp.git
    name: diy-birdy-app

  workers:
  - name: gremlin-server
    image:
      registry_type: DOCKER_HUB
      repository: tinkerpop/gremlin-server
      tag: "3.7.0"
    
    envs:
      - key: GREMLIN_SERVER_USER
        value: gremlin
        scope: RUN_TIME
        type: GENERAL
      - key: GREMLIN_SERVER_PASSWORD
        value: gremlin
        scope: RUN_TIME
        type: SECRET